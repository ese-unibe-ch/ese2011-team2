#{selenium 'Test other Calendars'}


	clearSession()

	// Setup
	open('/secure/login')
	waitForPageToLoad(1000)
	type('username', 'aaron')
	type('password', 'ese')
	clickAndWait('css=input[type=submit]')
	assertTitle('Home')
	type('calendarName','AaronCal')
	clickAndWait('css=#addCalendar > form > input[type="submit"]')
	clickAndWait('link=AaronCal')
	assertTitle('Calendar')
	type('name', 'merge')
	type('startDate', '05.10.2011 12:00')
	type('description', 'hui')
	click('css=input[value="public"]')
	clickAndWait('css=input[type=submit]')
	clickAndWait('link=Log out')
	

	open('/secure/login')
	waitForPageToLoad(1000)
	type('username', 'erwann')
	type('password', 'ese')
	clickAndWait('css=input[type=submit]')
	assertTitle('Home')
	type('calendarName','aCal')
	clickAndWait('css=#addCalendar > form > input[type="submit"]')
	clickAndWait('link=aCal')
	assertTitle('Calendar')
	
	// Add aarons public events
	clickAndWait('css=input[value="aaron"]')
	open(http://localhost:9000/application/selectdate?month=9&year=2011&day=5&calendarName=aCal)
	waitForPageToLoad(1000)
	assertTitle('Calendar')
	assertTextPresent('merge')
	assertTextPresent('12:00, 05.Oct - 13:00, 05.Oct')
	assertTextPresent('(public Event created by aaron)')
	assertTextPresent('Description: hui')
	
	// Deselect aaron
	clickAndWait('css=input[value="aaron"]')
	assertTextNotPresent('merge')
	assertTextNotPresent('12:00, 05.Nov - 13:00, 05.Nov')
	assertTextNotPresent('(public Event created by aaron)')
	assertTextNotPresent('Description: hui')
	
	
	// Create busy Event
	type('name', 'busyThing')
	type('startDate', '05.10.2011 12:00')
	type('description', 'very important thing')
	click('css=input[value="busy"]')
	clickAndWait('css=input[type=submit]')
	open(http://localhost:9000/application/selectdate?month=9&year=2011&day=5&calendarName=aCal)
	waitForPageToLoad(1000)
	assertTextPresent('busyThing')
	assertTextPresent('12:00, 05.Oct - 13:00, 05.Oct')
	assertTextPresent('(public Event created by erwann)')
	assertTextPresent('Description: very important thing')

	// Logout Erwann, Login Aaron
	clickAndWait('link=Log out')
	open('/secure/login')
	waitForPageToLoad(1000)
	type('username', 'aaron')
	type('password', 'ese')
	clickAndWait('css=input[type=submit]')
	assertTitle('Home')
	
	// Check busy event from Erwann
	clickAndWait('link=AaronCal')
	click('css=input[value="erwann"]')
	open(http://localhost:9000/application/selectdate?month=9&year=2011&day=5&calendarName=AaronCal)
	waitForPageToLoad(1000)
	clickAndWait('link=Delete')
	// assertTextPresent('erwann is busy from 12:00 - 13:00')
	assertTextNotPresent('busyThing')
	assertTextNotPresent('12:00, 05.Oct - 13:00, 05.Oct')
	assertTextNotPresent('(public Event created by erwann)')
	assertTextNotPresent('Description: very important thing')
	
	// Tear Down
	clickAndWait('link=Log out')
	open('/secure/login')
	waitForPageToLoad(1000)
	type('username', 'erwann')
	type('password', 'ese')
	clickAndWait('css=input[type=submit]')
	openAndWait('/indexpage/deletecalendar?calendarName=aCal')
	assertTextNotPresent('aCal')
	clickAndWait('link=Log out')
	assertTitle('Login')
	
#{/selenium}