#{extends 'main.html' /}
#{set title:'Calendar' /}
#{set header:'Calendar' /}

<head>
	<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/calendar.css'}">
</head>

<div id=month>
#{month calendarBrowser /}
</div>
<div id=selectedDay>
	<h2>Events on selected day:</h2>
		<ul>#{list items: iterator, as:'event'}
			<!--  TODO: handle timezone correctly -->
			%{
				visibility = "private"
				if (event.public) {
					visibility = "public"
				}
			}% 
			<li>${event.start.format("HH:mm")} - ${event.end.format("HH:mm")} ${event.name} (${visibility}) <br/>
				<a href=@{Application.editEvent(calendar.name, event.hashCode(), event.start.format("dd.MM.yyyy HH:mm"))}>Edit</a> | 
				<a href=@{Application.deleteEvent(calendar.name, event.hashCode(), event.start.format("dd.MM.yyyy HH:mm"))}>Delete</a> 
			</li>
		#{/list}
	</ul>
</div>

<div id=createEvent>
	<h2>Create a new Event</h2>
				#{form @Application.createEvent()}
					<input type="hidden" name="calendarName" value="${calendar.name}">
					<p>
						<label for="name">Event Name: </label> <br/>
						<input type="text" name="name" placeholder="name"/>
					</p>
					<p>
						<label for="startDate">Start Date: </label> <br/>
						<input type="text" name="startDate" placeholder="dd.MM.yyyy HH:mm"/>
					</p>
					<p>
						<label for="endDate">End Date: </label> <br/>
						<input type="text" name="endDate" placeholder="dd.MM.yyyy HH:mm"/>
					</p>
					<p>
						<input type="checkbox" name="isPublic"/>
						<label for="isPublic">Make public</label>
					</p>
					<p>
						<input type="submit" value="create Event">
					</p>
				#{/form}
</div>
